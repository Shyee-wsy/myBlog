webpackJsonp([9],{IcnI:function(t,e,n){"use strict";var o=n("7+uW"),r=n("NYxO"),a=n("lbHh"),i=n.n(a),s=function(t,e,n){return n?i.a.set(t,e,{expires:n}):i.a.set(t,e)},l=function(t){return i.a.get(t)},u=function(t){return i.a.remove(t)},c=n("vMJZ"),p={state:{token:l("TOKEN_KEY")},mutations:{SET_TOKEN:function(t,e){t.token=e,s("TOKEN_KEY",e,5)},REMOVE_TOKEN:function(t){t.token=null,u("TOKEN_KEY")}},actions:{Authentication:function(t,e){var n=t.commit;c.a.verifyToken(e).then(function(t){v.state.configuration.githubUsername===t.data.login?(n("SET_TOKEN",e),o.default.prototype.$notify({title:"成功",message:"Token绑定成功",type:"success"})):o.default.prototype.$message({message:"Token用户不一致",type:"error"})}).catch(function(){console.log("token绑定失败")})},Cancellation:function(t){(0,t.commit)("REMOVE_TOKEN"),o.default.prototype.$message({message:"Token取消绑定",type:"info"})}}},f={state:{avatarUrl:null,name:null,blog:null,followers:0,following:0},mutations:{SET_AVATAR_URL:function(t,e){t.avatarUrl=e},SET_NAME:function(t,e){t.name=e},SET_BLOG:function(t,e){t.blog=e},SET_FOLLOWERS:function(t,e){t.followers=e},SET_FOLLOWING:function(t,e){t.following=e}},actions:{GetInfo:function(t){var e=t.commit;c.a.getInfo().then(function(t){e("SET_AVATAR_URL",t.avatar_url),e("SET_NAME",t.name),e("SET_BLOG",t.blog),e("SET_FOLLOWERS",t.followers),e("SET_FOLLOWING",t.following)})}}},h={state:{githubUsername:"Shyee-wsy",htmlTile:""},mutations:{SET_CONFIGURATION:function(t,e){t.githubUsername=e.githubUsername||"Shyee-wsy",t.htmlTile=e.htmlTitle||t.githubUsername+"的博客"}},actions:{LocalReload:function(t,e){(0,t.commit)("SET_CONFIGURATION",e)},Init:function(t){var e=t.commit,n=void 0;(n=window.XMLHttpRequest?new XMLHttpRequest:new ActiveXObject("Microsoft.XMLHTTP")).send(),e("SET_CONFIGURATION",JSON.parse(n.responseText))}}},m={token:function(t){return t.token.token},githubUsername:function(t){return t.configuration.githubUsername},htmlTile:function(t){return t.configuration.htmlTile},name:function(t){return t.user.name},blog:function(t){return t.user.blog}};o.default.use(r.a);var d=new r.a.Store({modules:{token:p,user:f,configuration:h},getters:m}),v=e.a=d},NHnr:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var o=n("7+uW"),r={render:function(){var t=this.$createElement,e=this._self._c||t;return e("div",{attrs:{id:"app"}},[e("router-view")],1)},staticRenderFns:[]};var a=n("VU/8")({name:"App"},r,!1,function(t){n("lb0x")},null,null).exports,i=n("/ocq"),s=n("Dd8w"),l=n.n(s),u=n("NYxO"),c={data:function(){return{show:!1,handleClose:null,tokenForm:{token:""}}},computed:l()({},Object(u.b)(["githubUsername"])),methods:{open:function(t){this.handleClose=t,this.show=!0},onSubmit:function(){var t=this;this.$refs.tokenForm.validate(function(e){e&&(t.$store.dispatch("Authentication",t.tokenForm.token),"function"==typeof t.handleClose&&t.handleClose())}),this.show=!1}}},p={render:function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",[n("el-dialog",{attrs:{title:"绑定token",visible:t.show,width:"500px"},on:{"update:visible":function(e){t.show=e}}},[n("el-form",{ref:"tokenForm",attrs:{model:t.tokenForm,"label-width":"100px"}},[n("el-form-item",{attrs:{label:"Github"}},[n("el-tag",[t._v(t._s(t.githubUsername))])],1),t._v(" "),n("el-form-item",{attrs:{prop:"token",label:"Token",rules:[{required:!0,message:"请输入accessToken",trigger:"blur"}]}},[n("el-input",{attrs:{placeholder:"请保管好Token"},model:{value:t.tokenForm.token,callback:function(e){t.$set(t.tokenForm,"token",e)},expression:"tokenForm.token"}})],1)],1),t._v(" "),n("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[n("el-button",{on:{click:function(e){t.show=!1}}},[t._v("取 消")]),t._v(" "),n("el-button",{attrs:{type:"primary"},on:{click:t.onSubmit}},[t._v("确 定")])],1)],1)],1)},staticRenderFns:[]};var f={components:{tokenDialog:n("VU/8")(c,p,!1,function(t){n("kBDF")},"data-v-13c7ba68",null).exports},data:function(){return{RouterMap:w}},computed:l()({},Object(u.b)(["token","githubUsername"])),methods:{onSelect:function(t){this.$router.push(t)},openTokenDialog:function(){this.$refs.tokenDialog.open(function(){})},cancelToken:function(){this.token&&this.$store.dispatch("Cancellation")}}},h={render:function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",[n("el-card",{attrs:{shadow:"hover"}},[n("el-menu",{on:{select:t.onSelect}},t._l(t.RouterMap,function(e){return n("el-menu-item",{key:e.path,attrs:{index:e.path}},[n("i",{class:e.meta.icon}),t._v("\n        "+t._s(e.meta.title)+"\n      ")])}),1)],1),t._v(" "),this.token?n("el-card",{staticStyle:{"margin-top":"15px"},attrs:{shadow:"hover"}},[n("span",[t._v("取消绑定")]),t._v(" "),n("el-button",{attrs:{type:"text"},on:{click:t.cancelToken}},[t._v("取消token绑定")])],1):n("el-card",{staticStyle:{"margin-top":"15px"},attrs:{shadow:"hover"}},[n("span",[t._v("  Token未绑定  ")]),t._v(" "),n("el-button",{attrs:{type:"text"},on:{click:t.openTokenDialog}},[t._v("绑定")])],1),t._v(" "),n("token-dialog",{ref:"tokenDialog"})],1)},staticRenderFns:[]},m=n("VU/8")(f,h,!1,null,null,null).exports,d={render:function(){var t=this.$createElement,e=this._self._c||t;return e("div",[e("el-card",{staticStyle:{height:"90vh",overflow:"auto"},attrs:{shadow:"hover"}},[e("router-view")],1)],1)},staticRenderFns:[]},v=n("VU/8")(null,d,!1,null,null,null).exports,g=n("vMJZ"),b={components:{sidebar:m,AppMain:v},data:function(){return{value:[],avatar:"",gitHubUrl:""}},methods:{handleSelect:function(t){switch(t){case"github":window.open(this.gitHubUrl);break;case"zhihu":window.open("https://www.zhihu.com/people/shyee-69/activities")}},getAvatar:function(){var t=this;g.a.getInfo().then(function(e){var n=e.data;t.avatar=n.avatar_url,t.gitHubUrl=n.html_url}).catch(function(t){return console.log("获取头像失败")})}},mounted:function(){this.getAvatar()}},_={render:function(){var t=this,e=t.$createElement,o=t._self._c||e;return o("el-container",[o("el-header",{staticClass:"page-header"},[o("el-row",{attrs:{gutter:15}},[o("el-col",{attrs:{span:5}},[o("img",{staticStyle:{width:"110px",height:"110px",position:"relative",top:"-40px"},attrs:{src:t.avatar,alt:"头像"}})]),t._v(" "),o("el-col",{attrs:{span:19}},[o("el-card",{attrs:{shadow:"hover","body-style":{padding:"3px"}}},[o("el-row",{attrs:{gutter:20}},[o("el-col",{attrs:{span:9}},[o("el-menu",{attrs:{mode:"horizontal"},on:{select:t.handleSelect}},[o("el-submenu",{attrs:{index:"about"}},[o("template",{slot:"title"},[t._v(" 社区 ")]),t._v(" "),o("el-menu-item",{attrs:{index:"github"}},[t._v("Github")]),t._v(" "),o("el-menu-item",{attrs:{index:"zhihu"}},[t._v("知乎")]),t._v(" "),o("el-menu-item",{attrs:{index:"jianshu"}},[t._v("简书")])],2)],1)],1),t._v(" "),o("el-col",{attrs:{span:7}},[o("el-form",{staticStyle:{position:"relative",top:"10px"}},[o("el-form-item",[o("el-input",{attrs:{placeholder:"搜索..."}})],1)],1)],1),t._v(" "),o("el-col",{attrs:{span:8}},[o("audio",{staticStyle:{"padding-top":"3px",outline:"none"},attrs:{controls:"controls",loop:""}},[o("source",{attrs:{src:n("qheF")}})])])],1)],1)],1)],1)],1),t._v(" "),o("el-main",[o("el-row",{attrs:{gutter:20}},[o("el-col",{attrs:{span:5}},[o("sidebar")],1),t._v(" "),o("el-col",{attrs:{span:19}},[o("AppMain")],1)],1)],1),t._v(" "),o("el-footer",{staticStyle:{padding:"1rem 6rem","background-color":"#afafb6",color:"white"}},[o("address",[t._v("Copyright ©2019 Shyee-wsy")])])],1)},staticRenderFns:[]};var k=n("VU/8")(b,_,!1,function(t){n("ONHz")},null,null).exports;o.default.use(i.a);var w=[{path:"/",redirect:"/blog/list",component:k,meta:{title:"博客列表",icon:"el-icon-notebook-2"},children:[{path:"/blog/list",component:function(){return Promise.all([n.e(0),n.e(1)]).then(n.bind(null,"abY2"))}},{path:"/blog/newBlog",component:function(){return Promise.all([n.e(0),n.e(4)]).then(n.bind(null,"DZBp"))}},{path:"/blog/detail/:id",component:function(){return Promise.all([n.e(0),n.e(6)]).then(n.bind(null,"Lo6X"))}},{path:"/blog/edit/:id",component:function(){return Promise.all([n.e(0),n.e(3)]).then(n.bind(null,"dTs2"))}}]},{path:"/social",component:k,meta:{title:"社交",icon:"el-icon-user"},children:[{path:"",component:function(){return n.e(7).then(n.bind(null,"BAkB"))}}]},{path:"/projects",component:k,meta:{title:"开源项目",icon:"el-icon-s-grid"},children:[{path:"",component:function(){return n.e(2).then(n.bind(null,"H7NX"))}}]},{path:"/about",component:k,meta:{title:"关于作者",icon:"el-icon-user-solid"},children:[{path:"",component:function(){return n.e(5).then(n.bind(null,"0yK0"))}}]}],T=new i.a({routes:w}),O=n("zL8q"),y=n.n(O),E=(n("tvR6"),n("IcnI")),S={parseHeader:function(t){try{for(var e=t.link.split(","),n=0;n<e.length;n++){var o=e[n];if(!(o.indexOf('rel="last"')<0))for(var r=o.split(/[\?&]/),a=0;a<r.length;a++){var i=r[a].split("=");if("page"==i[0])return parseInt(i[1])}}}catch(t){}return 0}};o.default.use(y.a),o.default.config.productionTip=!1,o.default.prototype.$util=S,new o.default({el:"#app",router:T,store:E.a,components:{App:a},template:"<App/>"})},ONHz:function(t,e){},kBDF:function(t,e){},lb0x:function(t,e){},qheF:function(t,e,n){t.exports=n.p+"static/media/music.9fee7eb.mp3"},tvR6:function(t,e){},vLgD:function(t,e,n){"use strict";var o=n("//Fk"),r=n.n(o),a=n("mtWM"),i=n.n(a),s=n("7+uW"),l=n("zL8q"),u=(n.n(l),n("IcnI")),c=i.a.create({baseURL:"https://api.github.com",timeout:3e4});c.interceptors.request.use(function(t){var e=u.a.state.token.token;return e&&(t.url+=(-1===t.url.indexOf("?")?"?":"&")+"access_token="+e),t},function(t){return r.a.reject(t)}),c.interceptors.response.use(function(t){return t},function(t){var e=t.response.data.message;switch(t.response.status){case 401:e="Token错误";break;default:e=t.response.data.message}return s.default.prototype.$message({message:e,type:"error"}),r.a.reject("error")}),e.a=c},vMJZ:function(t,e,n){"use strict";var o=n("vLgD"),r=n("IcnI");e.a={verifyToken:function(t){return Object(o.a)({url:"/user?access_token="+t})},getInfo:function(){var t=r.a.state.configuration.githubUsername;return Object(o.a)({url:"/users/"+t})},followers:function(t){var e=r.a.state.configuration.githubUsername;return Object(o.a)({url:"/users/"+e+"/followers"})},following:function(t){var e=r.a.state.configuration.githubUsername;return Object(o.a)({url:"/users/"+e+"/following"})},projects:function(){var t=r.a.state.configuration.githubUsername;return Object(o.a)({url:"/users/"+t+"/repos"})}}}},["NHnr"]);
//# sourceMappingURL=app.5ec3861738e5e3ca2875.js.map